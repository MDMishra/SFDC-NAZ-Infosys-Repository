<apex:page docType="html-5.0" controller="ABS_WholesalerAccountDetail"  CACHE="True"  showHeader="false" setup="false" id="wholePage">
    <html lang="en" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport"  content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no"/>
        <apex:includeScript value="{!URLFOR($Resource.ABS_Bootstrap, 'jquery.min.js')}"/>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAB5OoIjmYbz9A9clKvOC-y7EqWZw7wRRc" type="text/javascript"></script>      
        <script type="text/javascript" src="/canvas/sdk/js/publisher.js"></script>
        <script src="../../soap/ajax/37.0/connection.js" type="text/javascript"></script>
        <script src="https://code.jquery.com/jquery-1.8.2.js"></script>
        <script type="text/javascript" src="/canvas/sdk/js/publisher.js"></script>
        <script src="https://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css"/>
        <apex:stylesheet value="{!URLFOR($Resource.LDS, 'assets/styles/salesforce-lightning-design-system.min.css')}" />
        <style>
        
            body{font-family: "Salesforce Sans",Arial,sans-serif !important;}
            .header {background-color:#000033;color: #ffffff;padding: 10px;}                                              
            #map_canvas {margin:0 auto;height:400px;min-width:100%;float:right;}
            #map_canvas {margin:0 auto;height:400px;min-width:100%;float:right;}
            #map_wrapper {height: 300px;}                                                
            #map_canvas { width: 100%; height: 100%;}
            .collBar{
                height: 50px;
                border-radius: 0px;
                background-image: linear-gradient(black,black);
            }
            .SpinnerBackground{
                border-radius: 1px;
                background-image: linear-gradient(white,white);
            }
            .scrollable {
                overflow-y:auto;
                margin-top : 5px;
            }
            .mapping{
                overflow-y:auto;
            }
            .line-separator{
                 height:1px;
                 background:#d8dde6;
                 border-bottom:0px solid #313030;
            }
            .slds-p-around--xxx-small
            {
                padding: .01rem !important;
            }
            .retailerBar{
                border: 0px solid #d8dde6;
                height: 45px;
                border-radius: 0px;
                background: #EFEFF4;
            }
            .Greencircle
            {
                width:60px;
                height:60px;
                border-radius:260px;
                font-size:15px;
                font-weight:bold;
                line-height:60px;
                text-align:center;
                background:green;
                color: white;
            }
            .Yellowcircle
            {
                width:60px;
                height:60px;
                border-radius:260px;
                font-size:15px;
                font-weight:bold;
                line-height:60px;
                text-align:center;
                background:yellow;
                color: white;
            }
            .Redcircle{
                width:60px;
                height:60px;
                border-radius:260px;
                font-size:15px;
                font-weight:bold;
                line-height:60px;
                text-align:center;
                background:Red;
                color: white;
            }
            .bold_text{
                font-weight: bold;
            }
            .bolder_text{
                font-weight: bolder;
            }
            .color_black{
                color: #000000;
            }
            .Channel_heading_color{
                color: black !important;
            }
            .text_bold
            {
                font-size: 20px;
                font-weight: bold;
            }
            .text_bold1
            {
                font-size: 30px;
                font-weight: bold;
            }
            .plus_symbol{
                color: white;
                cursor:pointer;
            }
            .account_heading_color{
                color: white;
            }
            .textcenter
            {
                left: 0;
                line-height: 200px;
                margin-top: -100px;
                position: absolute;
                text-align: center;
                top: 50%;
                width: 100%;
            }
           .textcenterRe{
               left: 0;
               line-height: 363px;
               text-align: center;
               top: 50%;
               width: 100%;
               padding-left: 365px;
           }
           .textu{
               text-decoration: underline
           }
           .textcur{
                cursor: pointer; cursor: hand; 
           }
           ul li{
                margin-left:0px;
           }
           .slds-card+.slds-card {
                margin-top: 5px !important;
           }
        </style>
        <script>
            window.addEventListener("orientationchange", function() {
                // Announce the new orientation number
               document.location.reload(true);
            }, false);
        </script>
        
        <script type="text/javascript">
            var objAccountdata = new Object();
            var namelist=[];
            var userMainlat;
            var userMainlng;
            var navLog=0;
            var navlat=0;
            var glat;
            var glong;
            var NoRecords = 'false';
            $(function()
            {
                var h = window.innerHeight -151;
                $('.scrollable').css({'height':h + 'px'});
                $(window).resize(function(){
                    $('.scrollable').css({'height': h +'px'});
                });
            });
            
            function myfiltersVal()
            {
                var myRetailer='{!viewByProfile}'
                var retailersTeam='{!$currentPage.parameters.retailersTeam}';
                //alert(retailersTeam);
                //alert(myRetailer);
                if((myRetailer == 'true' && retailersTeam !='undefined' ) || retailersTeam == 'true' )
                {
                    //alert('Entered');
                    document.getElementById('wholePage:filtersform:isinstance1').checked=true;
                }else{
                
                    document.getElementById('wholePage:filtersform:isinstance1').checked=false;
                }
            }
        
            function loadPocs(lat,long) 
            {
                document.getElementById('sldsSpinner').style.display='block';
                var recSize='{!$currentPage.parameters.size}';
                var retailersTeam;
                var OnPremise;
                var OffPremise;
                var Channel;
                var targetAchievement;
                var isFilteradded;
                retailersTeam='{!$currentPage.parameters.retailersTeam}';
                OnPremise='{!$currentPage.parameters.OnPremise}';
                OffPremise='{!$currentPage.parameters.OffPremise}';
                Channel='{!$currentPage.parameters.Channel}';
                targetAchievement='{!$currentPage.parameters.ClosetoTargetAchievement}';
                isFilteradded='{!$currentPage.parameters.isFilteradded}'
                Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.ABS_WholesalerAccountDetail.findPocs}',lat,long,retailersTeam,OnPremise,OffPremise,Channel,recSize,targetAchievement,isFilteradded,
                function(result, event)
                {
                    //console.log(result);
                    if(event.status)
                    {
                        if(result.length==0)
                        {
                            document.getElementById('em').innerHTML  = "&nbsp;&nbsp;&nbsp;&nbsp;No records found";  
                            document.getElementById('sldsSpinner').style.display='none';
                            myfiltersVal();
                            NoRecords  = 'true';
                        }
                        //scrollpannel div start
                        var strTable = "<div id=\"scrollpannel\">";
                        //wholePage:wholeSalerForm:pocPanel span start
                        strTable += "<span id=\"wholePage:wholeSalerForm:pocPanel\">";
                        //wholePage:wholeSalerForm:j_id28 span start
                        strTable += "<span id=\"wholePage:wholeSalerForm:j_id28\">";
                        for (var i=0; i<result.length; i++) 
                        {
                            //NoRecords  = 'false';
                            //alert(result[0].Filter);
                            if(result[0].Filter =='All Retailers')
                            {
                                document.getElementById('retName').style.display='block';
                                document.getElementById('wholePage:filtersform:isinstance1').checked=false;

                            }else{
                                document.getElementById('myretName').style.display='block';
                                document.getElementById('wholePage:filtersform:isinstance1').checked=true;
                            }
                            objAccountdata[result[i].id] = result[i];
                            var accname=result[i].pocAccount.Name
                            var varTitle = $('<textarea />').html(accname).text();
                            namelist.push(varTitle); 
                            var divIdIs = "div-"+result[i].id;
                            //slds-card div start
                            strTable += "<div id=\""+divIdIs;
                            strTable += "\" class=\"slds-card Accountgrdbg\">";
                            //slds-grid div start
                            strTable += "<div class=\"slds-grid slds-card__header slds-wrap slds-p-left--large slds-p-top--small\">";
                            //slds-media div start
                            strTable += "<div class=\"slds-media slds-media--center slds-col--padded slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-2 slds-p-top--x-small\">";
                            //slds-tile tile div start
                            strTable += "<div class=\"slds-tile slds-media\">";
                            
                            //slds-media__body div start
                            strTable += "<div class=\"slds-media__body\">";
                            //slds-grid slds- div start
                            strTable += "<div class=\"slds-grid slds-grid--align-spread slds-has-flexi-truncate\">";
                              strTable += "<p class=\"slds-text-heading--medium bold_text \">";
                            //strTable += "<a id=\"rnames\" onclick=\"navigatePage(\""+objpocAccounts[i].Id+"\");\" target=\"_blank\">";
                            strTable += "<a id=\"rnames\" class= \"Channel_heading_color\" onclick=\"javascript:return navigatePage('"+result[i].id + "');\" target=\"_blank\">";
                            strTable += result[i].pocAccount.Name;
                            strTable += "</a>";
                            strTable += "</p>";
                            //slds-grid slds- div end
                            strTable += "</div>";
                            //slds-tile__detail div start
                            strTable += "<div class=\"slds-tile__detail slds-text-body--small\">";
                            strTable += "<ul class=\"slds-list--horizontal\">";
                            strTable += "<li class=\"slds-item\">";
                            strTable += "<p class=\"slds-text-heading--small\">";
                            strTable += ((result[i].pocAccount.SAP_Channel__c==undefined)?"":result[i].pocAccount.SAP_Channel__c);
                            strTable += "</p>";
                            strTable += "</li>";
                            strTable += "</ul>";
                            strTable += "<ul class=\"slds-list--horizontal\">";
                            strTable += "<li class=\"slds-item slds-p-right--x-small\">";
                            strTable += "<p class=\"slds-text-heading--small\">";
                            strTable += "Channel : ";
                            strTable += "</p>";
                            strTable += "</li>";
                            strTable += "<li class=\"slds-item \">";
                            strTable += "<p class=\"slds-text-heading--small\">";
                            if(result[i].pocAccount.RTL_SEG_NM_US__c == undefined)
                            {
                                strTable += " ";
                            }
                            else
                            {  
                                //strTable += result[i].pocAccount.RTL_SEG_NM_US__c;
                                strTable += toTitleCase(result[i].pocAccount.RTL_SEG_NM_US__c);
                            }
                            strTable += "</p>";
                            strTable += "</li>";
                            strTable += "</ul>";
                            //slds-tile__detail div end
                            strTable += "</div>";
                            //slds-media__body div end
                            strTable += "</div>";
                            //slds-tile tile div end
                            strTable += "</div>";
                            //slds-media div end
                            strTable += "</div>";
                            //slds-col div start
                            strTable += "<div class=\"slds-col slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-2 slds-p-top--xx-small\">";
                            strTable += "<span id=\"wholePage:wholeSalerForm:j_id29:0:j_id33\">";
                            strTable += "<span id=\"wholePage:wholeSalerForm:j_id29:0:j_id34\">";
                            //slds-grid div start
                            strTable += "<div class=\"slds-grid \">";
                           // strTable += "<div class=\"slds-size--1-of-12  slds-small-size--1-of-4 slds-medium-size--1-of-3  slds-align--absolute-left bold_text\">";
                            //strTable += "";
                            ////slds-size--1-of-4 div end
                            //strTable += "</div>";
                            strTable += "<div class=\"slds-size--1-of-1 slds-small-size--1-of-1 slds-medium-size--3-of-4  slds-align--absolute-center slds-m-right--xx-large bold_text\">";
                            strTable += "<span style=\"visibility:hidden\">";
                            strTable += "C";
                            strTable += "</span>";
                            strTable += "SAP Assortment";
                            //slds-size--1-of-4 div end
                            strTable += "</div>";
                            //strTable += "<div class=\"slds-size--1-of-3  slds-small-size--2-of-4 slds-medium-size--1-of-3  slds-align--absolute-left bold_text\">";
                            //strTable += "";
                            ////slds-size--1-of-4 div end
                           // strTable += "</div>";
                            //alert(result[i].HighEnd + ' result[i].HighEnd');
                            // enter the removed code
                            //slds-grid div end
                            strTable += "</div>";
                            //slds-grid div start
                            strTable +="<div class=\"slds-grid\">";                       
                            if(result[i].colorCore !=undefined)
                            {
                                if(result[i].HighEnd == undefined)
                                {
                                    strTable +="<div style=\"visibility:hidden\" class=\"slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-text-align--center bold_text\">";
                                    strTable +="<div class=\"Redcircle\">";
                                    strTable += "</div>";
                                    strTable += "</div>";
                                }
                                var accIdCore = ''+result[i].id+'Core';
                                var accIdALNR = ""+result[i].id+"ALNR";
                                strTable +="<div class=\"slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-text-align--center bold_text\">";
                                //colorcore div starts
                                //strTable += "<div class=\""+result[i].colorCore + "\"id=\""+accIdCore + "\" style = \"cursor: pointer;\"onclick=\"javascript:return openPopUp('" + accIdCore + "');\" >" ;  
                                strTable += "<div class=\""+result[i].colorCore;
                                strTable += '" id="'+accIdCore;                       
                                strTable += "\" style=\"cursor: pointer;\"";
                                strTable += "onclick=\"openPopUp('"+accIdCore;
                                strTable += "');return false;\">";
                                strTable += result[i].Core;
                                //colorcore div end
                                strTable += "</div>";
                                //slds-popover div starts
                                strTable += "<div id =\""+ accIdCore+ "Open\"  class=\"slds-popover slds-nubbin--bottom slds-hide slds-size--1-of-1\" aria-hidden=\"false\" aria-describedby=\""+accIdALNR+"\">";
                                //slds-popover__header div starts
                                strTable += "<div class=\"slds-popover__header\">";
                                strTable += "<div class=\"slds-text-align--right\"><a href=\"#!\" onclick=\"closePopup('"+accIdCore;
                                strTable += "');return false;\">X</a></div>";
                                //slds-popover__header div end
                                strTable += "</div>";
                                //slds-popover__body div starts
                                strTable += '<div class="slds-popover__body">';
                                strTable += "<p>Program</p>";
                                strTable += "<p>Target</p>";
                                strTable += "<p>"+result[i].pgmCore+"</p>";
                                //slds-popover__body div end
                                strTable += '</div>'; // Body Close
                                //slds-popover div end
                                strTable += '</div>'; //Popover Close
                                strTable += '</div>'; //slds-size--1-of-4 slds-small-size--2-of-4 slds-medium-size--1-of-4 slds-text-align--center bold_text Close
                            }   //strTable += '</div>'; //slds-grid close
                            var displaystyle;
                            if(result[i].HighEnd == undefined)
                            {
                                displaystyle= "none";                           
                            }
                            else
                            {
                                displaystyle ="";
                            }
                            if( result[i].HighEnd != undefined)
                            {
                                //style div starts
                                strTable += "<div style=display:"+displaystyle+" class=\"slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-text-align--center bold_text\">";
                                strTable += "<div class=\""+result[i].colorHighEnd;
                                strTable += "\" style=\"cursor: pointer;\"";
                                var accIdHighEnd = ''+result[i].id+'HighEnd';
                                strTable += " onclick=\"openPopUp('"+accIdHighEnd;
                                strTable += "');return false;\">";
                                strTable += result[i].HighEnd;
                                strTable += "</div>";                            
                                var accIdALNRIs = ""+result[i].id+"ALNR";
                                //slds-popover div starts
                                strTable += "<div id=\""+accIdHighEnd+"Open\" class=\"slds-popover slds-nubbin--bottom slds-hide slds-size--1-of-1\" aria-hidden=\"false\" aria-describedby=\""+accIdALNRIs+"\">";
                                //slds-popover__header div starts
                                strTable += "<div class=\"slds-popover__header\">";
                                //div end is there in the next statement
                                strTable += "<div class=\"slds-text-align--right\"><a href=\"#!\" onclick=\"closePopup('"+accIdHighEnd;
                                strTable += "');return false;\">X</a></div>";
                                //slds-popover__header div end
                                strTable += "</div>";
                                //slds-popover__body div starts
                                strTable += '<div class="slds-popover__body">';
                                strTable += "<p>Program</p>";
                                strTable += "<p>Target</p>";
                                strTable += "<p>"+result[i].pgmHighEnd+"</p>";
                                //slds-popover__body div end
                                strTable += '</div>';
                                //slds-popover div end
                                strTable += '</div>';                            
                                //style div end
                                strTable += '</div>';
                            }
                            if(result[i].FMB !=undefined)
                            {
                                //style div start
                                strTable += "<div style=display:"+displaystyle+" class=\"slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-text-align--center bold_text\">";    
                                var accIdFMB = ''+result[i].id+'FMB';
                                strTable += "<div class=\""+result[i].colorFmb;
                                strTable += "\" style=\"cursor: pointer;\"";
                                strTable += " onclick=\"openPopUp('"+accIdFMB;
                                strTable += "');return false;\">";
                                strTable += result[i].FMB;
                                strTable += "</div>";                            
                                var accIdALNRFMB = ""+result[i].id+"ALNR";                            
                                //slds-popover div starts
                                strTable += "<div id=\""+accIdFMB+"Open\" class=\"slds-popover slds-nubbin--bottom slds-hide slds-size--1-of-1\" aria-hidden=\"false\" aria-describedby=\""+accIdALNRFMB+"\">";
                                //slds-popover__header div starts
                                strTable += "<div class=\"slds-popover__header\">";
                                //div end is there in the next statement
                                strTable += "<div class=\"slds-text-align--right\"><a href=\"#!\" onclick=\"closePopup('"+accIdFMB;
                                strTable += "');return false;\">X</a></div>";                            
                                //slds-popover__header div end
                                strTable += "</div>";
                                //slds-popover__body div starts
                                strTable += '<div class="slds-popover__body">';
                                strTable += "<p>Program</p>";
                                strTable += "<p>Target</p>";
                                strTable += "<p>"+result[i].pgmFmb+"</p>";
                                //slds-popover__body div end
                                strTable += '</div>';
                                //slds-popover div ends
                                strTable += '</div>';                            
                                //style div end
                                strTable += "</div>";
                            }
                            //slds-grid div end
                            strTable += "</div>";
                             //slds-grid div start
                              
                            strTable += "<div class=\"slds-grid\">";
                            //slds-size--1-of-4 div start
                            if(result[i].HighEnd == undefined){
                                strTable += "<div style=\"visibility:hidden\" class=\"slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-truncate slds-p-left--x-small bold_text\">";
                                strTable += "";
                                //slds-size--1-of-4 div end
                                strTable += "</div>";
                            }
                            
                            strTable += "<div class=\"slds-m-top--x-small slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-truncate slds-p-left--x-small bold_text\">";
                            strTable += "<span style=\"visibility:hidden\">";
                            strTable += "C";
                            strTable += "</span>";
                            strTable += "Core";
                            //slds-size--1-of-4 div end
                            strTable += "</div>";
                            //alert(result[i].HighEnd + ' result[i].HighEnd');
                            if(result[i].HighEnd != undefined){
                                //slds-size--1-of-4 div start
                                strTable += "<div class=\"slds-m-top--x-small slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-3 slds-truncate bold_text\">";
                                
                                strTable += "High End";
                                //slds-size--1-of-4 div end
                                strTable += "</div>";
                            }
                            if(result[i].FMB != undefined){
                                //slds-size--1-of-4 div start
                                strTable += "<div class=\"slds-m-top--x-small slds-size--1-of-3 slds-small-size--2-of-4 slds-medium-size--1-of-4 slds-truncate slds-p-left--x-small bold_text\">";
                                strTable += "<span style=\"visibility:hidden\">";
                                strTable += "C;";
                                strTable += "</span>";
                                strTable += "FMB";
                                //slds-size--1-of-4 div end
                                strTable += "</div>";
                            }
                            strTable += "</div>";
                            strTable += "</span>";
                            strTable += "</span>";
                            //slds-col div end
                            strTable += "</div>";
                            //slds-grid div end
                            strTable += "</div>";                        
                            //slds-card div end
                            strTable += "</div>";
                        }
                        //wholePage:wholeSalerForm:j_id28 span end
                        strTable += "</span>";
                        //wholePage:wholeSalerForm:pocPanel span end
                        strTable += "</span>";
                        //scrollpannel div end
                        strTable += "</div>";                    
                        //console.log(strTable);
                        document.getElementById('division').innerHTML=strTable;
                        document.getElementById('sldsSpinner').style.display='none';
                    }else {
                        //alert(event.message);
                        document.getElementById('em').innerHTML  = "No Records found";  
                        document.getElementById('sldsSpinner').style.display='none';
                        NoRecords  = 'true';
                        myfiltersVal();
                    }
                },
                {escape: true});
                
                
            }
            
            function toTitleCase(str)
            {
                    return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
            }
        
            //fuction which loads on page load pull geo loacation values
            function callbackSuccess()
            {
                if(navigator.geolocation)
                {
                    navigator.geolocation.getCurrentPosition(jsfind,showError,{timeout: 5000});
                }
                else{
                    console.log('navigator not supported');
                }
            }
        
            // fuction is called if geolocation is not pulled
            function showError(error)
            {
                glat=0;
                glong=0;
                loadPocs(0,0);
            }
              
            //fuction which send geolocation is to action function
            function jsfind(position)
            {
                //get latitude and longitude
                var pos = {};
                pos = position.coords;
                console.log(pos);
                var lat = pos.latitude;
                var lon = pos.longitude;
                glat=pos.latitude;
                glong=pos.longitude;
                loadPocs(lat,lon);
            }
        
            //function to implement search
            function search()
            {
                suggest();
                var temp= document.getElementById('searchName').value;           
                //alert('Search string is :'+ temp);
                for (var property in objAccountdata) 
                {               
                    var tempAcc = objAccountdata[property];
                    //var name = tempAcc.pocAccount.Name;
                    var name=$('<textarea />').html(tempAcc.pocAccount.Name).text()
                    var sapchannel = tempAcc.pocAccount.SAP_Channel__c;
                    var channel = tempAcc.pocAccount.RTL_SEG_NM_US__c; 
                    var divIdIs = "div-"+property;
                    //alert(temp.indexOf(searchString));
                    if(name.indexOf(temp) != -1)
                    {   
                       //console.log(document.getElementById(divIdIs).style.display);
                       if(document.getElementById(divIdIs).style.display=== 'none')
                       {
                           document.getElementById(divIdIs).style.display= ""; 
                       }                  
                    }else{
                   
                       document.getElementById(divIdIs).style.display= "none";
                    }
                
                }          
           
            }
            function openPopUp(id)
            {
                var toggleElements = $(".slds-popover");
                $.each(toggleElements, function (key, value)
                {
                    if ($(this).hasClass('slds-show'))
                    {
                        $(this).removeClass('slds-show');
                        $(this).addClass('slds-hide');
                        $(this).on("click", function(e){
                            // Do things
                            e.preventDefault()
                            return false;
                        });
                    }
                });
                var x = id + "Open";
                document.getElementById(x).className = "slds-popover slds-nubbin--top-left slds-show slds-size--1-of-1";
            }
            function closePopup(id)
            {
                document.getElementById(id+"Open").className = "slds-popover slds-nubbin--top-left slds-hide slds-size--1-of-1";
                //return false;
                //$('body').unbind('touchmove');
            }   
            function navigatePage(accountid)
            {
                var id=accountid;
                pocAccount(accountid,glat,glong);
                /*try
                {
                    sforce.one.navigateToURL('/apex/ABS_PocAccountDetaiLPage?id='+accountid+'&lat='+navlat+'&lon='+navLog);
                }
                catch(e)
                {
                    window.location.href = '/apex/ABS_PocAccountDetaiLPage?id='+accountid+'&lat='+navlat+'&lon='+navLog;
                }*/
            }
            function closePocPanel()
            {
                //initialize_poc() ;
                document.getElementById('MainPage').style.display='block';
                document.getElementById('pocPagePanel').style.display='none';
                var h = window.innerHeight -151;
                $('.scrollable').css({'height':h + 'px'});
                $(window).resize(function(){
                $('.scrollable').css({'height': h +'px'});
                });
            }
            function diplayPocPannel()
            {
                document.getElementById('MainPage').style.display='none';
                document.getElementById('pocPagePanel').style.display='block';
                document.getElementById('sldsclassfooter').style.display='block';
                var h = window.innerHeight -50;
                $('.scrollable').css({'height':h + 'px'});
                $(window).resize(function(){
                $('.scrollable').css({'height': h +'px'});
                });
            }
 
            //fuction to collpase and expanding
            function change_autorefreshdiv()
            {
               if (NoRecords == 'true')
                {
                    document.getElementById('em').innerHTML  = "No Records found";
                    document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar slds-hide";
                    document.getElementById("lineSeparator").className="slds-grid slds-p-around--xxx-small";
                }
                var NAME = document.getElementById("collpased");
                var currentClass = NAME.className;
                document.getElementById('searchName').value= "";
                if (currentClass == "slds-is-collapsed") 
                {
                    // Check the current class name
                    document.getElementById('em').innerHTML = "";
                    NAME.className = "slds-is-expanded";   // Set other class name
                    document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar slds-hide";
                    document.getElementById("lineSeparator").className="slds-grid slds-p-around--xxx-small";
                    document.getElementById("accord").innerHTML = "List";
                    document.getElementById("scrollpannel1").style.dispaly = "none";
                    document.getElementById("scrollpannel1").style.height = "0px";
                    document.getElementById("dvFilter").className = 'slds-hide';
                    document.getElementById("scrollpannel1").className = 'scrollable slds-hide'; 
                     var h = window.innerHeight -100;
                    $('.mapping').css({'height':h + 'px'});
                    $(window).resize(function(){
                    $('.mapping').css({'height': h +'px'});
                    });
                    
                    
                    initialize() ;
                }else
                {
                   // if (NoRecords = 'false')
                    //{
                        NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                        document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar";
                        document.getElementById("lineSeparator").className="line-separator";
                        document.getElementById("accord").innerHTML = "Map";
                        document.getElementById("scrollpannel1").style.dispaly = "inline";
                        document.getElementById("dvFilter").className = 'slds-hide';
                        document.getElementById("scrollpannel1").className = 'scrollable slds-show'; 
                        var h = window.innerHeight -151;
                        $('.scrollable').css({'height':h + 'px'});
                        $(window).resize(function(){
                        $('.scrollable').css({'height': h +'px'});
                        });
                      //}
                      //else
                      //{
                      // TODO: No Records
                      //document.getElementById('em').innerHTML  = "No Records found";  
                      //}
                      

                }
            }
            
            // function which diplays wholesaler pointer
            function initialize() 
            { 
                var userName;
                for (var propt in objAccountdata)
                {
                    var temp = objAccountdata[propt];
                    userMainlat=temp.userlat;
                    userMainlng=temp.userlong;
                    userName=temp.userName;
                    break;
                }
                var pinColor = 'blue-dot.png';
                var pinsImage ="https://maps.google.com/mapfiles/ms/icons/"+pinColor;
                var myLatlng = new google.maps.LatLng(userMainlat,userMainlng);
                var mapOptions = {center: myLatlng,
                                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                                  zoom: 15,
                                  };
                var markers = new google.maps.Marker({
                              position: myLatlng,
                              icon: pinsImage,
                              zoom: 15,
                                   
                });
                  
                map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
                markers.setMap(map);
                var mapBoundary = new google.maps.LatLngBounds();
                mapBoundary.extend(myLatlng );
                map.fitBounds(mapBoundary);
              
                // Variable to define the HTML content to be inserted in the infowindow
                var iwContent = '<div id="con">' +
                                '<div class="ti">' + userName + '</div>' +
                                '</div>';
                
                var infowindow = new google.maps.InfoWindow({
                                 content: iwContent 
                });
                  
                // Event that opens the InfoWindow with a click on the map
                google.maps.event.addListener(markers, 'click', function() {
                                              infowindow.open(map, markers); 
                });
              
                // Event that closes the InfoWindow with a click on the map
                google.maps.event.addListener(map, 'click', function() { infoWindow.close(); });
               
              
                // Finally displayMarkers() function is called to begin the markers creation
                displayMarkers();
            }
              
            // function which send data to create Poc markers
            function displayMarkers()
            {
                var bounds = new google.maps.LatLngBounds();
                for (var propt in objAccountdata)
                {
                    var temp = objAccountdata[propt];
                    var latlng = new google.maps.LatLng(temp.pocAccount.BillingLatitude, temp.pocAccount.BillingLongitude);
                    var urls=temp.mapUrl;
                    var RecordIds=temp.id;
                    var name=temp.pocAccount.Name;
                    var iscore=temp.isCore;
                    var isfmb=(temp.isFMB==undefined?false:temp.isFMB);
                    var ishighend=(temp.isHighEnd==undefined?false:temp.isHighEnd);
                    var core=temp.Core;
                    var highEnd=(temp.HighEnd==undefined?"":temp.HighEnd);
                    var fmb=(temp.FMB==undefined?"":temp.FMB);
                    var mapPinColor=temp.mappinColor;
                    createMarker(latlng, urls, RecordIds,name,iscore,isfmb,ishighend,core,highEnd,fmb,mapPinColor);
                    bounds.extend(latlng);
                }
                map.fitBounds(bounds);
            }
            
            // function which creates map pointers
            function createMarker(latlng, urls, RecordIds,name,iscore,isfmb,ishighend,core,highEnd,fmb,mapPinColor)
            {
                var value = RecordIds;
                var isCore;
                var isAllcore;
                var DRFT;
                var ALNR;             
                console.log(value);
                if(iscore === true && ishighend === false && isfmb === false)
                {
                    isCore=true;
                }else 
                {
                    isAllcore=true;
                }
                //var pinColor = colormap;
                var pinsImage ="https://maps.google.com/mapfiles/ms/icons/"+mapPinColor;
                name = name.replace("\\","");
                var marker = new google.maps.Marker({
                             map: map,
                             position: latlng,
                             title: name,
                             icon: pinsImage,
                             url: urls
                             });
              
                // Variable to define the HTML content to be inserted in the infowindow
                var iwContent='';
                var nodata='';
                if(isCore === true)
                {
                    iwContent = '<div id="iw_container">' +
                    '<div style="font-weight: normal;font-size: 14px;">'+'<font color="brown",weight="bold"><a target="_blank" onclick="navigatePage(\''+RecordIds+'\');">'+name + '</a></font>'+'</div>'+
                    '<div class="iw_title" style="font-weight: normal;font-size: 12px;" >'+'<font color="Green",weight="bold">' +'Core:'+core+ '</font>'+ '</div>' +
                    '<div class="iw_content">' +'<font color="Green",weight="bold">'+'</font>'+'<br />'+ 
                    '</div></div>';
                      
                }else if(isAllcore  === true)
                {
                    iwContent = '<div id="iw_container">' +
                    '<div style="font-weight: normal;font-size: 14px;">'+'<font color="brown",weight="bold"><a target="_blank" onclick="navigatePage(\''+RecordIds+'\');">'+name + '</a></font>'+'</div>'+
                    '<div class="iw_title" style="font-weight: normal;font-size: 12px;" >'+'<font color="Green",weight="bold">' +'Core:'+core + '</font>'+ '</div>' +
                    '<div class="iw_content">' +'<font color="Green",weight="bold">'+'High End:'+highEnd+ '</font>'+'<br />' 
                    +'<font color="Green",weight="bold">'+'FMB:'+fmb+ '</font>'+'<br />'+'</div></div>';
                }
                else
                {
                    iwContent =iwContent = '<div id="iw_container">' +
                    '<div style="font-weight: normal;font-size: 14px;">'+'<font color="brown",weight="bold"><a target="_blank" onclick="navigatePage(\''+RecordIds+'\');">'+name + '</a></font>'+'</div></div>'
                }
                var infowindow = new google.maps.InfoWindow({content: iwContent}); 
                      
                marker.addListener('click', function(){infowindow.open(map, this);});
                    
                google.maps.event.addListener(marker, 'dblclick', function() 
                {
                    try
                    {
                        sforce.one.navigateToURL(marker.url);
                    }
                    catch(e)
                    {
                        window.location.href = marker.url;
                    }
                              
                });
                map.setCenter(new google.maps.LatLng(userMainlat,userMainlng));
            }
            function suggest()
            {
                var j$=jQuery.noConflict(); 
                j$('[id$=searchName]').autocomplete({
                   source:namelist
                });           
            }
        
           function navigateFilterPage()
           {
                
                        var NAME = document.getElementById("collpased");
                        NAME.className = "slds-is-collapsed";
                        document.getElementById('searchName').value= "";
                        document.getElementById('em').innerHTML  = "";
                        if(document.getElementById("span_Filter").innerText == 'Filter')
                        {
                             
                                document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar slds-hide";
                                document.getElementById("lineSeparator").className="slds-grid slds-p-around--xxx-small";
                                document.getElementById("span_Filter").innerText = 'Cancel';
                                document.getElementById("scrollpannel1").style.dispaly = "none";
                                document.getElementById("scrollpannel1").style.height = "0px";
                                document.getElementById("dvFilter").className = 'slds-show';
                                document.getElementById("scrollpannel1").className = 'scrollable slds-hide';
                                var h = window.innerHeight - 105;
                                    $('.Filterhg ').css({'height':h + 'px'});
                                    $(window).resize(function()
                                    {
                                        $('.Filterhg').css({'height': h +'px'});
                                    });
                                
                               
                            }
                        else{
                                if (NoRecords == 'true')
                                    {
                                        document.getElementById('em').innerHTML  = "No Records found";
                                        document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar slds-hide";
                                        document.getElementById("lineSeparator").className="slds-grid slds-p-around--xxx-small";
                                    }
                                    document.getElementById("span_Filter").innerText = 'Filter';
                                    document.getElementById("dvFilter").className = 'slds-hide';
                                    document.getElementById("retailerHeader").className="slds-grid slds-p-around--x-small retailerBar";
                                    document.getElementById("lineSeparator").className="line-separator";
                                    document.getElementById("accord").innerHTML = "Map";
                                    document.getElementById("scrollpannel1").style.height = "100%";
                                    document.getElementById("scrollpannel1").style.dispaly = "inline";
                                    document.getElementById("scrollpannel1").className = 'scrollable slds-show';
                                     var h = window.innerHeight -151;
                                    $('.scrollable').css({'height':h + 'px'});
                                    $(window).resize(function(){
                                    $('.scrollable').css({'height': h +'px'});
                                    });
                                 
                            //alert(url);
                           // url=window.location.href;
                           }
            
                /*var res;
                var currentLocation = window.location.toString();
                //alert(currentLocation +'currentLocation');
                if(currentLocation.includes("?"))
                {
                    var pos = currentLocation.lastIndexOf("?");
                    res = currentLocation.substring(pos);
                }
                //alert(res)
                if(res === undefined)
                {
                    try
                    {
                        sforce.one.navigateToURL('/apex/ABS_MyFilters');
                    }
                    catch(e)
                    {
                        window.location.href = '/apex/ABS_MyFilters';
        
                    }
                 }else{
                    try
                    {
                        sforce.one.navigateToURL('/apex/ABS_MyFilters'+res);
                    }
                    catch(e)
                    {
                        window.location.href = '/apex/ABS_MyFilters'+res;
                    }
                    
                 }*/
            }
         
            $(function()
            {
                var h = window.innerHeight - 108 ;
                $('.Filterhg ').css({'height':h + 'px'});
                    $(window).resize(function(){
                        $('.Filterhg').css({'height': h +'px'});
                    });
            });
            function loadNewData()
            {
                setTimeout(function () {
                    //list.innerHTML = '<li>new user</li><li>new user 2</li>' + list.innerHTML;
                    url='/apex/ABS_WholesalerAccountDetail';
                    url=window.location.href;
                    //alert(url);
                    try
                    {
                        sforce.one.navigateToURL(url);
                    }
                    catch(e)
                    {
                        window.location.href = url;
                    }
                    loader.style.display = "none";
                }, 1000);
            }
            function navigateFaqPage()
            {
                var url='';
                var currentUrl=window.location.href;
                var nIndex = currentUrl.indexOf("?");
                if(nIndex > 0) {
                    url =currentUrl.substring(nIndex);
                }
                try
                {
                    sforce.one.navigateToURL('/apex/ABS_FAQs'+url);
                }
                catch(e)
                {
                    window.location.href = '/apex/ABS_FAQs'+url;                
                }
        
            }
            var iosVer=0;
            var ua=navigator.userAgent;              
            window.onload = function() 
            {
                try
                {
                    if (/iP(hone|od|ad)/.test(navigator.platform))
                    {
                        var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
                        var ver=[parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];
                        iosVer=ver[0];
                     }
                     var a=navigator.userAgent; 
                     if((a.indexOf('Salesforce')!=-1)&&(a.indexOf('iPhone')!=-1||a.indexOf('iPad')!=-1)&&(a.indexOf('OS/'+iosVer)!=-1||a.indexOf('OS '+iosVer)!=-1)&&(a.indexOf('Safari')==-1))
                     {
                         var s=document.createElement('style'); 
                         s.innerHTML="html,html body{overflow: auto;-webkit-overflow-scrolling:touch;}body{position:absolute;left:0;right:0;top:0;bottom:0;}"; 
                         document.getElementsByTagName('head')[0].appendChild(s);
                     }
                 }catch(e){}
            };
         
            if((ua.indexOf('Salesforce')!=-1)&&(ua.indexOf('iPhone')!=-1||ua.indexOf('iPad')!=-1)&&(ua.indexOf('OS/'+iosVer)!=-1||ua.indexOf('OS '+iosVer)!=-1)&&(ua.indexOf('Safari')==-1))
            { 
                function IOS_SCROLL_BOOTSTRAP() 
                { 
                    var children = Array.prototype.slice.call(document.body.children), 
                    placeholder = document.createElement('section'), 
                    fragment = document.createDocumentFragment(), 
                    styles, 
                    width, 
                    height; 
                    children.forEach(function(c){fragment.appendChild(c);}); 
                    placeholder.appendChild(fragment); 
                    styles = [ 
                    'width:100%;', 
                    'height:', (window.screen.height - 42), 'px;', 
                    'position: absolute; overflow: auto; -webkit-overflow-scrolling: touch' 
                    ].join(''); 
                    placeholder.style.cssText = styles; 
                    document.body.appendChild(placeholder); 
                } 
                window.addEventListener('load',function (e) { 
                IOS_SCROLL_BOOTSTRAP(); 
                }); 
            } 
            
            function navigatemainPage()
            {
                var sizerec=document.getElementById('wholePage:filtersform:size1').value;
                var url='/apex/ABS_WholesalerAccountDetail?size='+sizerec;
                if(document.getElementById('wholePage:filtersform:channel1').value != null)
                {
                    var Channel=document.getElementById('wholePage:filtersform:channel1').value;
                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&Channel='+Channel;
                }
                if(document.getElementById('wholePage:filtersform:isinstance1').checked)
                {
                    var retailersTeam=true;
                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&Channel='+Channel+'&retailersTeam='+retailersTeam;

                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&retailersTeam='+retailersTeam;
                }
                if(document.getElementById('wholePage:filtersform:isinstance2').checked)
                {
                    var OnPremise=true;
                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&Channel='+Channel+'&retailersTeam='+retailersTeam+'&OnPremise='+OnPremise;
                }
                if(document.getElementById('wholePage:filtersform:isinstance3').checked)
                {
                    var OffPremise=true;
                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&Channel='+Channel+'&retailersTeam='+retailersTeam+'&OnPremise='+OnPremise+'&OffPremise='+OffPremise;
                }
                if(document.getElementById('wholePage:filtersform:ClosetoTarget1').value != null)
                {
                    var ClosetoTargetAchievement=document.getElementById('wholePage:filtersform:ClosetoTarget1').value;
                    url='/apex/ABS_WholesalerAccountDetail?size='+sizerec+'&Channel='+Channel+'&retailersTeam='+retailersTeam+'&OnPremise='+OnPremise+'&OffPremise='+OffPremise+'&ClosetoTargetAchievement='+ClosetoTargetAchievement+'&isFilteradded=true';
                }
                //alert(url);
                try
                {
                    sforce.one.navigateToURL(url);
                }
                catch(e)
                {
                    window.location.href = url;
                }
            }
            
            // Called on page load
            google.maps.event.addDomListener(window, 'load',callbackSuccess);
            
            function LoadSurvey()
            {
                var gospotCheck='gospotcheck://places/11771835/missions/77923?user_id=143189';
                try
                {
                    sforce.one.navigateToURL(gospotCheck);
                }
                catch(e)
                {
                    window.location.href = gospotCheck;
                }
            
            
            }
        </script>   
    </head>
    <body>
    <!--<apex:form id="filtersform" onSubmit="return false;">-->
    <div id="MainPage">
    <apex:outputPanel id="recordsmainPanel">
        <!-- start of slds -->
        <div class="slds " i="sldsclass">
             <!-- start of slds conatiner-->
            <div  id="sldscontainer" class="slds-container--center FilterBg slds-container--small slds-container--medium slds-container--large ">
                <!-- freeze pannel start -->
                <div id="freezepan">
                    <!--Start of  slds grid -->
                    <div class="slds-grid collBar">
                        <!--Star: Header changes -->
                        <div class='slds-m-top--small slds-size--2-of-8 slds-small-size--6-of-10 slds-medium-size--1-of-12 slds-text-align--center'>
                            <!--<span class='slds-avatar slds-avatar--large'>
                            <img src="{!URLFOR($Resource.LDS, '/assets/images/headlogo.png')}" alt='Header logo' />
                            </span>-->

                            <span class="slds-text-heading--medium account_heading_color textcur" style="cursor: pointer;" id="span_Filter" onclick="navigateFilterPage();" >Filter </span>
                        </div>
                        <!--End: Header changes -->
                        <div class="slds-global-header__item slds-global-header__item--search slds-m-top--small slds-size--4-of-6 slds-small-size--6-of-8 slds-medium-size--10-of-12 slds-text-align--center">
                            <div class="slds-form-element">
                                <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left">
                                    <label class="slds-assistive-text" for="searchName">Search</label>
                                    <c:ABS_Component styleClass="slds-input__icon slds-icon-text-default" path="/assets/icons/utility-sprite/svg/symbols.svg#search" />
                                    <input  id="searchName" onsubmit="return false;" onkeydown="search();"   class="slds-input slds-lookup__search-input" type="search" placeholder="Search" />
                                </div>
                            </div>
                        </div>
                        <div class='slds-m-top--small slds-size--1-of-6 slds-small-size--1-of-8 slds-medium-size--1-of-12 slds-text-align--center '>
                            <!--<span class='slds-avatar slds-avatar--medium slds-m-top--x-small'>
                            <img src="{!URLFOR($Resource.LDS, '/assets/images/search-close-icons.png')}" alt='Header logo' id = "CloseClear" onclick="javascript:return SearchClear();" />
                            </span> -->
                            <span id="accord" class="slds-text-heading--medium account_heading_color textcur" style="cursor: pointer;" onclick="change_autorefreshdiv();" >Map</span>
                        </div>
  
                    </div>
                    <!--ENd of  slds grid -->
                  
                    <!-- Map -->
                    <apex:outputPanel id="mapPanel">
                        <div id="collpased" class="slds-is-collapsed" >
                            <div id="map_wrapper">
                                <div id="map_canvas" class="mapping">
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <!-- Map Pannel End-->                        
                    
                    <!--Retailers Header Start slds grid start-->     
                    <div id="retailerHeader" class="slds-grid slds-p-around--x-small retailerBar">                            
                        <div class='slds-size--1-of-1 slds-col slds-has-flexi-truncate' id='Retailers' >
                            <span id="retName" style="display:none" class="slds-section__title">Retailers Nearby</span>
                            <span id="myretName" style="display:none" class="slds-section__title">My Retailers</span>
                        </div>
                        <div class="slds-text-align--right slds-col slds-no-flex">
                            Data Upload &nbsp;
                            <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                            <apex:param value="{!dataloaderDate}" /> 
                            </apex:outputText>
                        </div>
                    </div>
                    <!--Retailers Header End slds grid start--> 
                    <div id="lineSeparator" class='line-separator' ></div>
               
                <!-- My Filter Pannel start-->
                <apex:form id="filtersform">
                   <div id="dvFilter" class = "slds-hide" >                   
                        <!--<div class="slds-grid slds-wrap slds-grid--pull-padded FilterBg Filterhg">-->
                        <div class="slds FilterBg Filterhg" id="sldsclass1">
                         <!-- start of slds conatiner-->
                        <div  id="sldscontainer" class="slds-container--center slds-container--small slds-container--medium slds-container--large slds-small-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--11-of-12">
                            <div class="slds-col--padded slds-small-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--11-of-12 slds-m-top--large slds-text-align--center">
                                <div class="slds-text-heading--large bold_text">Filters</div>
                            </div>             
                            <apex:actionRegion >
                                <div class="slds-col--padded slds-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--6-of-12  slds-p-left--xx-large slds-m-top--x-large">
                                    <div class="slds-grid  slds-grid--vertical-align-center">
                                        <label class="slds-form-element__label bolder_text color_black" for="text-input-01">Display</label>
                                        <div class="slds-select_container slds-size--1-of-3 slds-medium-size--3-of-6 slds-large-size--4-of-12">
                                            <apex:selectList value="{!size}" multiselect="false" id="size1" size="1" styleClass="slds-select bold_text color_black">
                                                <apex:selectOptions value="{!paginationSizeOptions}"/>
                                            </apex:selectList>
                                        </div>
                                        <label class="slds-form-element__label bolder_text color_black" for="text-input-01">&nbsp;retailers</label> 
                                   </div>
                                </div> 
                                <div class="slds-col--padded slds-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--6-of-12 slds-m-top--large slds-p-left--xx-large slds-m-top--x-large">
                                    <div class="slds-grid slds-grid--vertical-align-top">                                    
                                        <div>         
                                            <label class="slds-form-element__label bolder_text color_black slds-m-top--xx-small" for="text-input-01 bold_text">Show only:</label>
                                        </div>
                                        <div>
                                            <div class="slds-grid slds-size--1-of-1 slds-m-top--x-small">
                                                <apex:inputcheckbox id="isinstance1" value="{!MyRetailersTeam}"/>
                                                <span class="slds-checkbox--faux"></span>
                                                <span class="slds-form-element__label bolder_text color_black">&nbsp;My retailers</span>                                               
                                            </div>
                                            <div class="slds-grid slds-size--1-of-1 slds-m-top--x-small">
                                                <apex:inputcheckbox id="isinstance2" value="{!OnPremise}" />
                                                <span class="slds-checkbox--faux"></span>
                                                <span class="slds-form-element__label bolder_text color_black">&nbsp;On Premise</span>
                                            </div>  
                                            <div class="slds-grid slds-size--1-of-1 slds-m-top--x-small">
                                                <apex:inputcheckbox id="isinstance3" value="{!OffPremise}"  />
                                                <span class="slds-checkbox--faux"></span>
                                                <span class="slds-form-element__label bolder_text color_black">&nbsp;Small Format</span>
                                            </div> 
                                        </div>
                                    </div>
                               </div> 
                               <div class="slds-col--padded slds-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--6-of-12 slds-m-top--large slds-p-left--xx-large">
                                   <div class="slds-grid slds-grid--vertical-align-center">
                                       <label class="slds-form-element__label bolder_text color_black" for="text-input-01">Channel</label>
                                       <div class="slds-select_container slds-size--1-of-2 slds-medium-size--4-of-6 slds-large-size--5-of-12"> 
                                            <apex:selectList value="{!channel}" multiselect="false" size="1" id="channel1" styleClass="slds-select bold_text color_black">
                                                <apex:selectOptions value="{!ChannelOptions}"/>
                                            </apex:selectList>
                                        </div>
                                    </div>
                                </div>
                              <div class="slds-col--padded slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1 slds-m-top--large slds-p-left--xx-large">
                                   <div class="slds-grid slds-wrap slds-grid--vertical-align-center slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1">                                                                            
                                        <div class="bolder_text color_black">Accounts</div><div class="bolder_text color_black">&nbsp;within</div>  
                                        <div class="slds-select_container">
                                            <apex:selectList value="{!ClosetoTargetAchievement}" multiselect="false" size="1" id="ClosetoTarget1" styleClass="slds-select bold_text color_black">
                                                <apex:selectOptions value="{!ClosetoTarget}"/>
                                            </apex:selectList>
                                        </div>  
                                                                                  
                                             <div class="bolder_text color_black">of</div>
                                             <div class="bolder_text color_black">&nbsp;target</div>                                         
                                             <div class="bolder_text color_black">&nbsp;achievement</div>
                                        
                                    </div>
                                </div>                                                   
                                <div class="slds-col--padded slds-small-size--2-of-2 slds-medium-size--4-of-6 slds-large-size--11-of-12 slds-m-top--large slds-text-align--center">                                     
                                    <button type="button" class="slds-button slds-button--brand" onclick="navigatemainPage({!size},'{!retailer}','{!Premise}','{!channel}');">Apply</button>
                                </div>
                            </apex:actionRegion>
                             </div>
                        </div>
                        </div>  
                   
                </apex:form>
                <!-- My Filter Pannel End -->
                                         
                </div><!-- freeze pannel End -->
                <!-- Scroll Pannel start -->
                <div id="scrollpannel1" class ='scrollable'>
                    <div>
                        <span id="em" class="slds-text-heading--Large text_bold textcenter" ></span>
                    </div>
                    <div id="division">
                    </div>
                </div>
                <!--Scroll Pannel End -->
                
            </div>
            <!--Slds Container -->
        </div>
        <!--slds -->          
    </apex:outputPanel>
    <!--End Main Page -->
    </div>
    <!-- start Of Poc Page -->
    <apex:outputPanel id="pocPanel">
    <apex:outputPanel >
    <div id="pocPagePanel" style="display:none">
        <!-- start of slds div-->
        <div class="slds">
             <!-- start of slds conatiner-->
             <div class="slds-container--center slds-container--large">
               
                 <!-- Head Pannel Start -->
                 <div id="scrollpannel1" style="margin-top:0px;" class ='scrollable'>
                 <apex:outputPanel id="headPanel">
                     <!-- Start of Header Part -->
                     <div class="headerpoc">
                         <div class="slds-grid slds-col">
                             <div class='slds-size--1-of-6 slds-small-size--1-of-8 slds-medium-size--1-of-12 slds-text-align--center slds-p-bottom--xxx-small'>
                                 <!-- SVG Account ICON -->
                                 <span class="slds-avatar slds-avatar--x-large">
                                 <apex:image url="{!$Resource.ABS_Icon}"/> 
                                 </span> 
                             </div><!-- slds size -->
                             <div class='slds-size--11-of-12  slds-has-flexi-truncate slds-small-size--6-of-12 slds-medium-size--5-of-12 slds-p-left--x-small'>
                                 <span class="slds-text-heading--medium text_bold" >{!pocWrap.objPocAccount.name}</span>
                             </div> <!-- slds size --> 
                             <div class="slds-text-align--right slds-no-flex">
                                 <span onclick="closePocPanel();" style="cursor: pointer;" class="text_bold"> Close </span>
                             </div>
                         </div><!--ENd of  slds grid -->
                     </div> <!-- ENd of  Header -->
                 </apex:outputPanel>
                 <!-- Head End Start -->
                 <!-- Collapse Pannel Start -->
                 <div class="slds-m-top--xx-small"></div>
                 <div class="slds-grid  collBar ">
                     <div class='slds-size--1-of-6 slds-small-size--1-of-8 slds-medium-size--1-of-12 slds-text-align--center slds-p-top--xx-small'>
                         <span class="slds-p-around--small slds-text-heading--large plus_symbol_poc text_bold1_poc" id="accord_Poc" onclick="change_autorefreshdiv_poc();">
                             +
                         </span>
                     </div><!-- slds size -->
                     <div class='slds-size--11-of-12  slds-small-size--6-of-12 slds-medium-size--4-of-12 slds-p-top--x-small'>
                         <span class="slds-text-heading--medium account_heading_color textu" >Account Map </span>
                     </div> <!-- slds size -->
                 </div><!--ENd of  slds grid -->
                 <!-- Collapse Pannel End -->
                 <!-- Map Start-->
                 <apex:outputPanel id="mapPanel_Poc">
                 <div id="collpased_poc" class="slds-is-collapsed" >
                    <div id="map_wrapper_poc">
                        <div id="map_canvas_poc" class="mapping_poc"></div>
                    </div>
                </div>
                </apex:outputPanel>
                <!-- Map End-->
                <div class="slds-m-top--xx-small"></div>
                <div class="slds-grid slds-p-around--x-small  slds-text-heading--medium retailerBar" id='wholesalers'>
                    Wholesaler-{!pocWrap.objPocAccount.Wholesaler__r.name}
                </div> 
                <div class="broderClass"></div>
                <div class="slds-grid slds-card slds-p-around--small slds-theme--default">
                    <div class="slds-size--1-of-1 slds-small-size--4-of-5 slds-medium-size--2-of-4">
                        <div class='slds-size--1-of-1' id='wholesalers'><span class="slds-text-heading--medium ">{!pocWrap.objPocAccount.name}</span></div>
                    </div>
                </div>
                <!-- No Records to Display Pannel start-->
                <apex:outputPanel rendered="{!IF((pocWrap.isPocCore==false && pocWrap.isPocHighEnd==false && pocWrap.isPocFmb==false),true,false)}">
                <div class="slds-grid slds-p-around--x-large retailerBar_poc slds-text-align--center" >
                     <div class='slds-size--1-of-1' id='wholesalers'>
                         <span class="slds-text-heading--large slds-text-align--center">
                         No Records to display
                         </span>
                     </div>
                </div>
                </apex:outputPanel>
                <!-- No Records pannel end -->
                <!-- Core/he/fmb Pannel Start-->
                <!-- Main Pannel Start outer three-->
                <apex:outputPanel rendered="{!IF((pocWrap.isPocCore == true && pocWrap.isPocHighEnd == true && pocWrap.isPocFmb ==true),true,false)}">
                <!-- outer Div start -->
                <div class="slds-box slds-theme--inverse slds-p-around--x-large slds-text-heading--medium">
                    <!-- Core Pannel start -->
                    <div class="slds-grid slds-size--1-of-1" >
                        <div class="slds-text-align--left slds-col slds-has-flexi-truncate"><b>Core&nbsp;-&nbsp; {!SUBSTITUTE(pocWrap.pocCore, '/', ' of ')}</b></div>
                            <div class="slds-text-align--right slds-col slds-no-flex">                            
                            
                            <button class="text_bold slds-col--bump-left slds-button slds-button--icon-border" type="button" id="core" onclick="change_core();">
                               +
                            </button>
                        </div> 
                    </div>
                </div>
                <apex:outputPanel > 
                    <div id="corePanel" class="slds-is-collapsed" >
                        <div>
                        <!-- core start -->
                        <apex:outputPanel rendered="{!BrandSize['CORE']==0}">
                            <span class="textcenterpoc">
                            No Records to display
                            </span>
                        </apex:outputPanel>
                        <apex:repeat value="{!lstAccountTarget}" var="actarget">
                            <apex:outputPanel rendered="{!actarget.Brand_Category__c=='CORE'}">
                                <div class="slds-grid">
                                <!-- Product Image -->
                                    <div class="slds-col--padded slds-size--1-of-3 slds-small-size--1-of-3 slds-medium-size--1-of-4 "> 
                                        <apex:outputPanel rendered="{!IF(CONTAINS(ChkMapKey,actarget.SKU__c),true,false)}" >
                                        <!--<span class="slds-avatar slds-avatar-medium ">                   
                                            <apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}" width="200" height="50" > </apex:image>   
                                        </span>-->
                                        <span class="slds-avatar slds-grid slds-grid--align-center slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-3">                   
                                        <!--<apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}" width="200" height="50" > </apex:image>  -->                                         
                                        <apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}"> </apex:image>                                                           
                                        </span>
                                        </apex:outputPanel>
                                    </div>
                                <!-- Product Image -->
                               
                                <!-- Product Info -->
                                <div class="sslds-col--padded slds-size--1-of-2 slds-small-size--1-of-3 slds-medium-size--1-of-5 slds-text-align--center slds-media slds-media--center">{!actarget.Brand_Package__c} </div>
                                <!-- Product Info -->
                              
                                <!-- Product Status Color -->
                                <div class="slds-col--padded slds-size--1-of-5 slds-small-size--1-of-5 slds-medium-size--1-of-5  slds-text-align--right slds-media slds-media--center">
                                    <apex:outputPanel rendered="{!actarget.Acheivement_Score__c >= 2 }" >
                                    <p class="green-circle_poc"></p>
                                    </apex:outputPanel>             
                                    <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 1 }" >
                                    <p class="yellow-circle_poc"></p>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 0 }" >
                                    <p class="red-circle_poc"></p>
                                    </apex:outputPanel></div>
                                </div>
                                <!-- Product Status Color -->
                            <!-- For Bootm Line -->
                            <div class="broderClass_poc"></div>    
                            </apex:outputPanel>
                        </apex:repeat>
                        <!-- core End -->
                        </div>
                    </div>
                    </apex:outputPanel>
                    <!-- Core Pannel End-->
                    <div class="slds-m-top--xx-small"></div> 
                    <!-- HE Pannel start-->
                    <div class="slds-box slds-theme--inverse slds-p-around--x-large slds-text-heading--medium">
                        <div class="slds-grid slds-size--1-of-1" >
                            <div class="slds-text-align--left slds-col slds-has-flexi-truncate"><b>High End&nbsp;-&nbsp; {!SUBSTITUTE(pocWrap.pocHighEnd, '/', ' of ')}</b></div>
                            <div class="slds-text-align--right slds-col slds-no-flex">
                                <button class="text_bold slds-col--bump-left slds-button slds-button--icon-border" type="button" id="highEnd" onclick="change_highend();">
                                    +
                                </button>
                            </div>
                        </div>
                    </div>
                    <apex:outputPanel > 
                        <div id="highEndPanel" class="slds-is-collapsed" >
                              <div >
                              <!-- highEnd start -->
                              <apex:outputPanel rendered="{!AND(BrandSize['High End']==0,BrandSize['HE']==0)}">
                                  <span class="textcenterpoc">
                                      No Records to display
                                  </span>
                              </apex:outputPanel>
                              <apex:repeat value="{!lstAccountTarget}" var="actarget">
                                  <apex:outputPanel rendered="{!OR(actarget.Brand_Category__c=='High End',actarget.Brand_Category__c=='HE')}">
                                      <div class="slds-grid">
                                          <!-- Product Image -->
                                          <div class="slds-col--padded slds-size--1-of-3 slds-small-size--1-of-3 slds-medium-size--1-of-4 "> 
                                              <apex:outputPanel rendered="{!IF(CONTAINS(ChkMapKey,actarget.SKU__c),true,false)}" >
                                                  <span class="slds-avatar slds-grid slds-grid--align-center slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-3">                     
                                                      <apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}"> </apex:image>                      
                                                  </span>
                                              </apex:outputPanel>
                                           </div>
                                           <!-- Product Image -->
                               
                                           <!-- Product Info -->
                                           <div class="sslds-col--padded slds-size--1-of-2 slds-small-size--1-of-3 slds-medium-size--1-of-5 slds-text-align--center slds-media slds-media--center">{!actarget.Brand_Package__c} </div>
                                           <!-- Product Info -->
                              
                                           <!-- Product Status Color -->
                                           <div class="slds-col--padded slds-size--1-of-5 slds-small-size--1-of-5 slds-medium-size--1-of-5  slds-text-align--right slds-media slds-media--center">
                                               <apex:outputPanel rendered="{!actarget.Acheivement_Score__c >= 2 }" >
                                               <p class="green-circle_poc"></p>
                                               </apex:outputPanel>             
                                               <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 1 }" >
                                               <p class="yellow-circle_poc"></p>
                                               </apex:outputPanel>
                                               <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 0 }" >
                                               <p class="red-circle_poc"></p>
                                               </apex:outputPanel></div>
                                           </div>
                                           <!-- Product Status Color -->
                                           <!-- For Bootm Line -->
                                           <div class="broderClass_poc"></div>    
                                  </apex:outputPanel>
                              </apex:repeat>
                              <!-- highEnd start -->
                              </div>
                         </div>
                    </apex:outputPanel>
                    <!-- HE Pannel End-->
                    <div class="slds-m-top--xx-small"></div>
                    <!-- fmb start -->
                    <div class="slds-box slds-theme--inverse slds-p-around--x-large slds-text-heading--medium">
                        <div class="slds-grid slds-size--1-of-1" >
                            <div class="slds-text-align--left slds-col slds-has-flexi-truncate"><b>FMB&nbsp;-&nbsp; {!SUBSTITUTE(pocWrap.pocFmb, '/', ' of ')}</b></div>
                            <div class="slds-text-align--right slds-col slds-no-flex">
                                <button class="text_bold slds-col--bump-left slds-button slds-button--icon-border" type="button" id="fmb" onclick="change_fmb();">
                                   +
                                </button>
                           </div>
                       </div> 
                    </div>
                    <apex:outputPanel > 
                        <div id="fmbPanel" class="slds-is-collapsed" >
                        <div >
                        <!-- fmb start -->
                        <apex:outputPanel rendered="{!BrandSize['FMB']==0}">
                           <span class="textcenterpoc">
                               No Records to display
                           </span>
                          </apex:outputPanel>
                          <apex:repeat value="{!lstAccountTarget}" var="actarget">
                              <apex:outputPanel rendered="{!actarget.Brand_Category__c=='FMB'}">
                                  <!-- slds grid start -->
                                  <div class="slds-grid">
                                      <!-- Product Image -->
                                      <div class="slds-col--padded slds-size--1-of-3 slds-small-size--1-of-3 slds-medium-size--1-of-4 "> 
                                          <apex:outputPanel rendered="{!IF(CONTAINS(ChkMapKey,actarget.SKU__c),true,false)}" >
                                          <span class="slds-avatar slds-grid slds-grid--align-center slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-3">                   
                                          <apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}"> </apex:image>                      
                                          </span>
                                          </apex:outputPanel>
                                      </div>
                                      <!-- Product Image -->
                                   
                                      <!-- Product Info -->
                                      <div class="sslds-col--padded slds-size--1-of-2 slds-small-size--1-of-3 slds-medium-size--1-of-5 slds-text-align--center slds-media slds-media--center">{!actarget.Brand_Package__c} </div>
                                      <!-- Product Info -->
                                  
                                      <!-- Product Status Color -->
                                      <div class="slds-col--padded slds-size--1-of-5 slds-small-size--1-of-5 slds-medium-size--1-of-5  slds-text-align--right slds-media slds-media--center">
                                          <apex:outputPanel rendered="{!actarget.Acheivement_Score__c >= 2 }" >
                                              <p class="green-circle_poc"></p>
                                              </apex:outputPanel>             
                                              <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 1 }" >
                                              <p class="yellow-circle_poc"></p>
                                              </apex:outputPanel>
                                              <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 0 }" >
                                              <p class="red-circle_poc"></p>
                                          </apex:outputPanel>
                                     </div>
                                     <!-- Product Status Color -->
                                  </div>
                                  <!-- slds grid End-->
                                  <!-- For Bootm Line -->
                                  <div class="broderClass_poc"></div>    
                              </apex:outputPanel>
                          </apex:repeat>
                          <!-- fmb end -->
                        </div>
                        </div>
                    </apex:outputPanel>
                    <!-- fmb End -->
                <!-- outer Div End -->
                </apex:outputPanel>
                <!--Main Pannel End outer three -->
                <!-- Core/he/fmb Pannel End -->
                
                
                <!-- only core start -->
                <apex:outputPanel rendered="{!IF((pocWrap.isPocCore==true && pocWrap.isPocHighEnd==false && pocWrap.isPocFmb==false),true,false)}">
                    <div class="slds-box slds-theme--inverse slds-p-around--x-large slds-text-heading--medium">
                        <div class="slds-grid slds-size--1-of-1" >
                            <div class="slds-text-align--left slds-col slds-has-flexi-truncate"><b>Core&nbsp;-&nbsp; {!SUBSTITUTE(pocWrap.pocCore, '/', ' of ')}</b></div>
                            <div class="slds-text-align--right slds-col slds-no-flex">
                                <!--<a href="gospotcheck://places/11771835/missions/77923?user_id=143189">Confirm</a>-->
                                <button class="text_bold slds-col--bump-left slds-button slds-button--icon-border" type="button" id="ALNR" onclick="change_ALNR();">
                                   +
                                </button>
                            </div> 
                        </div>
                    </div>
                    <apex:outputPanel >
                        <div id="ALNRPanel" class="slds-is-collapsed" >
                        <div>
                        <!-- core start -->
                        <apex:outputPanel rendered="{!BrandSize['CORE']==0}">
                            <span class="textcenterpoc">
                                No Records to display
                            </span>
                        </apex:outputPanel>
                        <apex:repeat value="{!lstAccountTarget}" var="actarget">
                            <apex:outputPanel rendered="{!actarget.Brand_Category__c=='CORE'}">
                                <div class="slds-grid">
                                    <!-- Product Image -->
                                    <div class="slds-col--padded slds-size--1-of-3 slds-small-size--1-of-3 slds-medium-size--1-of-4 "> 
                                        <apex:outputPanel rendered="{!IF(CONTAINS(ChkMapKey,actarget.SKU__c),true,false)}" >
                                        <span class="slds-avatar slds-grid slds-grid--align-center slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-3">                   
                                            <apex:image styleclass="imageWidth" url="{!mapImages[actarget.SKU__c]}"> </apex:image>                                                           
                                        </span>
                                        </apex:outputPanel>
                                    </div>
                                    <!-- Product Image -->
                               
                                    <!-- Product Info -->
                                    <div class="sslds-col--padded slds-size--1-of-2 slds-small-size--1-of-3 slds-medium-size--1-of-5 slds-text-align--center slds-media slds-media--center">{!actarget.Brand_Package__c} </div>
                                    <!-- Product Info -->
                              
                                    <!-- Product Status Color -->
                                    <div class="slds-col--padded slds-size--1-of-5 slds-small-size--1-of-5 slds-medium-size--1-of-5  slds-text-align--right slds-media slds-media--center">
                                        <apex:outputPanel rendered="{!actarget.Acheivement_Score__c >= 2 }" >
                                            <p class="green-circle_poc"></p>
                                            </apex:outputPanel>             
                                            <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 1 }" >
                                            <p class="yellow-circle_poc"></p>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!actarget.Acheivement_Score__c = 0 }" >
                                            <p class="red-circle_poc"></p>
                                        </apex:outputPanel>
                                    </div>
                                    <!-- Product Status Color -->
                                </div>
                            
                                <!-- For Bootm Line -->
                                <div class="broderClass_poc"></div>    
                            </apex:outputPanel>
                        </apex:repeat>
                        <!-- core End -->
                        </div>
                        </div>
                    </apex:outputPanel>
                    <div class="slds-m-top--xx-small"></div> 
              
                </apex:outputPanel>
                <!-- only core End-->
                </div>
             </div>
             <!-- End of slds conatiner-->
         </div>
         <!-- End of slds div-->
     </div>
     <!-- End Of Poc Page -->
     </apex:outputPanel>
     </apex:outputPanel>
     <!-- Start footer-->
    <div class="slds" id="sldsclassfooter">
        <!-- start of slds conatiner-->
        <div  id="sldscontainer" class="slds-container--center slds-container--small slds-container--medium slds-container--large ">
            <!-- Freeze Pan -->
            <div id="freezepan">
                <!-- slds collbar start-->
                <div class="slds-grid collBar" >
                   <div class='slds-size--1-of-3 slds-text-align--center slds-grid slds-grid--vertical slds-navigation-list--vertical'  >
                        <span class='slds-avatar slds-avatar--Large'  >
                            <img src="{!URLFOR($Resource.LDS, '/assets/images/Survey_1.png')}"  onclick="LoadSurvey();" alt='Header logo' style="cursor: pointer; cursor: hand;"/>
                        </span>
                        <span class = "slds-text-heading--small account_heading_color" >
                        <label style="cursor: pointer; cursor: hand;">Survey</label> 
                        </span>
                    </div>  
                   <div class='slds-size--1-of-3 slds-text-align--center slds-grid slds-grid--vertical slds-navigation-list--vertical'  >
                        <span class='slds-avatar slds-avatar--Large'  >
                            <img src="{!URLFOR($Resource.LDS, '/assets/images/Refresh_1.png')}"  onclick="loadNewData();" alt='Header logo' style="cursor: pointer; cursor: hand;"/>
                        </span>
                        <span class = "slds-text-heading--small account_heading_color" >
                        <label style="cursor: pointer; cursor: hand;">Refresh</label> 
                        </span>
                    </div>                           
                    <div class='slds-size--1-of-3 slds-text-align--center slds-grid slds-grid--vertical slds-navigation-list--vertical' >
                            <span class='slds-avatar slds-avatar--Large'>
                                <img src="{!URLFOR($Resource.LDS, '/assets/images/Questions2.png')}"  onclick="navigateFaqPage();" alt='Header logo' style="cursor: pointer; cursor: hand;"  />
                            </span>
                            <span class = "slds-text-heading--small account_heading_color" >
                             <label style="cursor: pointer; cursor: hand;">Help</label> 
                            </span>
                        
                     </div>           
                </div>
                <!-- slds collbar End-->
            </div>
            <!-- Freeze pan -->
        </div>
        <!-- slds container End-->
    </div>
    <!-- slds main end-->
    <!--  End footer-->
     <apex:form >
     <!-- Action function start -->
     <apex:actionFunction name="pocAccount" action="{!pocdetails}" reRender="pocPanel,scrptPanel" status="status" oncomplete="diplayPocPannel();buttonColor();" >
         <apex:param name="accParam" assignTo="{!accountId}" value="" />
         <apex:param name="firstParam" assignTo="{!userLats}" value="" />
         <apex:param name="secondParam" assignTo="{!userLongs}" value="" />
     </apex:actionFunction>
     <!-- Action function End -->
     </apex:form>
    <!-- Slds Spinner start -->
    <div id="sldsSpinner" class="slds-spinner_container SpinnerBackground" style="display:none">
        <div class="slds-spinner--brand slds-spinner slds-spinner--medium" role="alert">
            <span class="slds-assistive-text">Loading</span>
            <div class="slds-spinner__dot-a"></div>
            <div class="slds-spinner__dot-b"></div>
        </div>
    </div>
    <!-- Slds Spinner End-->
    </body>
   
    <apex:outputPanel id="scrptPanel">
     
    <script>
        /* This Method is written to Make the div collpaseable*/
        function change_autorefreshdiv_poc()
        {
            var NAME = document.getElementById("collpased_poc");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("accord_Poc").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("accord_Poc").innerHTML = "+";
            }
            initialize_poc();
        } 
        
        $(function()
        {
            var h = window.innerHeight -151;
            $('.scrollable').css({'height':h + 'px'});
            $(window).resize(function(){
                $('.scrollable').css({'height': h +'px'});
            });
        });
    
        //Display Poc Map 
        function initialize_poc() 
        { 
            var poclag="{!pocWrap.objPocAccount.BillingLatitude}";
            var poclng='{!pocWrap.objPocAccount.BillingLongitude}'; 
            var mainName='{!pocWrap.pocName}';      
            var pinColor = '{!pocWrap.mapPocPinColor}';
            var pinsImage ="https://maps.google.com/mapfiles/ms/icons/"+pinColor;
            var mypocLatlng = new google.maps.LatLng(poclag,poclng);
            var mapOptions = {center: mypocLatlng ,
                              icon: pinsImage,
                              mapTypeId: google.maps.MapTypeId.ROADMAP,
                              zoom: 10,
                             };
            var markers = new google.maps.Marker({
                               position: mypocLatlng,
                               icon: pinsImage,
            });
        
            map = new google.maps.Map(document.getElementById('map_canvas_poc'),mapOptions);
            markers.setMap(map);
           
            var iscore='{!pocWrap.isPocCore}';
            var ishighEnd='{!pocWrap.isPocHighEnd}'
            var isFMB='{!pocWrap.isPocFmb}'
            var core='{!pocWrap.pocCore}';
            var highEnd='{!pocWrap.pocHighEnd}';
            var fmb='{!pocWrap.pocFmb}';
            var iwContent='';
            var name='{!pocWrap.pocName}';
            var palat='{!pocWrap.palat}';
            var palon='{!pocWrap.palon}';
            var ulatlng = new google.maps.LatLng(palat,palon);
            var userColorPin='blue-dot.png'
  
            if(iscore == 'true' && ishighEnd == 'true' && isFMB == 'true')
            {
                  iwContent = '<div id="iw_container">' +
                  '<div style="font-weight: normal;font-size: 14px;">'+'<font color="brown",weight="bold">'+name + '</font>'+'</div>'+
                  '<div class="iw_title" style="font-weight: normal;font-size: 12px;" >'+'<font color="Green",weight="bold">' +'Core:'+core+ '</font>'+ '</div>' +
                  '<div class="iw_content">' +'<font color="Green",weight="bold">'+'High End:'+highEnd+ '</font>'+'<br />' 
                  +'<font color="Green",weight="bold">'+'FMB:'+fmb+ '</font>'+'<br />'+'</div></div>';
            }else if(iscore == 'true' && ishighEnd == 'false' && isFMB == 'false')
            {
                  iwContent = '<div id="iw_container">' +
                  '<div style="font-weight: normal;font-size: 14px;">'+'<font color="black",weight="bold">'+name + '</font>'+'</div>' +
                  '<div class="iw_title" style="font-weight: normal;font-size: 12px;" >'+'<font color="Green",weight="bold">' +'Core:'+core+ '</font>'+ '</div>' +
                  '<div class="iw_content">' +'<font color="Green",weight="bold">'+'</font>'+'<br />'+ 
                  '</div></div>';
            
            }else{
            
                  iwContent =iwContent = '<div id="iw_container">' +
                  '<div style="font-weight: normal;font-size: 14px;">'+'<font color="brown",weight="bold">'+name + '</font>'+'</div></div>'
            }
            var infowindow = new google.maps.InfoWindow({
                 content: iwContent 
            });
              
            markers.addListener('click', function() {
                 infowindow.open(map, this);
            });
    
            // assuming you also want to hide the infowindow when user mouses-out
            markers.addListener('mouseout', function() {
                infowindow.close();
            });
            createMarker_poc(ulatlng,userColorPin,mypocLatlng,map);
        }
     
        function createMarker_poc(latlng,colormap,myLatlng,map)
        {
            var pinColor = colormap;
            var pinsImage ="https://maps.google.com/mapfiles/ms/icons/"+pinColor;
            var marker = new google.maps.Marker
            ({
             map: map,
             position: latlng,
             //title: name,
             icon: pinsImage,
             //url: urls
             });
         
             var mapBoundary = new google.maps.LatLngBounds();
             mapBoundary.extend(myLatlng);
             mapBoundary.extend(latlng);
             map.fitBounds(mapBoundary);
             //map.setCenter(new google.maps.LatLng(palat,palon));
        }
       /* function change_autorefreshdiv()
        {
            var NAME = document.getElementById("collpased");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("accord").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("accord").innerHTML = "+";
            }
        }  */
        function change_core()
        {
            var NAME = document.getElementById("corePanel");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("core").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("core").innerHTML = "+";
            }
            $('body').animate({
            scrollTop: $("#corePanel").offset().top},
            'slow');
        }  
        function change_highend()
        {
            var NAME = document.getElementById("highEndPanel");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("highEnd").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("highEnd").innerHTML = "+";
            }
            $('body').animate({
            scrollTop: $("#highEndPanel").offset().top},
            'slow');
        }
        function change_fmb()
        {
            var NAME = document.getElementById("fmbPanel");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("fmb").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("fmb").innerHTML = "+";
            }
             $('body').animate({
            scrollTop: $("#fmbPanel").offset().top},
            'slow');
        }
        function change_ALNR()
        {
            var NAME = document.getElementById("ALNRPanel");
            var currentClass = NAME.className;
            if(currentClass == "slds-is-collapsed") { // Check the current class name
                NAME.className = "slds-is-expanded";   // Set other class name
                document.getElementById("ALNR").innerHTML = "-";
            }else{
                NAME.className = "slds-is-collapsed";  // Otherwise, use `second_name`
                document.getElementById("ALNR").innerHTML = "+";
            }
            $('body').animate({
            scrollTop: $("#ALNRPanel").offset().top},
            'slow');
        }
        function buttonColor()
        {
            var iscore='{!pocWrap.isPocCore}';
            var ishighEnd='{!pocWrap.isPocHighEnd}';
            var isfmb='{!pocWrap.isPocFmb}';
            //alert('{!pocWrap.colorPocCore}');
            if( iscore == 'true' && ishighEnd == 'true' && isfmb == 'true')
            {
               var colorCore='{!pocWrap.colorPocCore}'+'_pocss'+' '+'text_bold slds-col--bump-left slds-button slds-button--icon-border';
               var colorHighEnd='{!pocWrap.colorPocHighEnd}'+'_pocss'+' '+'text_bold slds-col--bump-left slds-button slds-button--icon-border';
               var colorFmb='{!pocWrap.colorPocFmb}'+'_pocss'+' '+'text_bold slds-col--bump-left slds-button slds-button--icon-border';
               document.getElementById('core').className = colorCore;
               document.getElementById('highEnd').className =colorHighEnd;
               document.getElementById('fmb').className = colorFmb;
            }else if(iscore =='true')
            {
               var colorALNR='{!pocWrap.colorPocCore}'+'_pocss'+' '+'text_bold slds-col--bump-left slds-button slds-button--icon-border';
               document.getElementById('ALNR').className = colorALNR;
            }
        
        }
    </script>
    <style>
        .text_bold1_poc{
             font-size: 30px;
             font-weight: bold;
        }
        .plus_symbol_poc{
             color: white;
             cursor:pointer;
        }
        .Greencircle_pocss{     
             color: black;
             cursor:pointer;
             background-color:green !important;
             border-color: green !important;
                
        }
        .Yellowcircle_pocss{     
             color: black;
             cursor:pointer;
             background-color: yellow !important;
             border-color: yellow !important;
                
        }
        .Redcircle_pocss{     
             color: black;
             cursor:pointer;
             background-color: red !important;
             border-color: red !important;
                
        }
        .Greencircle_pocss:hover{
             color: black;
             cursor:pointer;
             background-color: #449d44 !important;
             border-color: #449d44 !important;
                
        }
        .Yellowcircle_pocss:hover{
             color: black;
             cursor:pointer;
             background-color: yellow !important;
             border-color: yellow !important;
                
        }
        .Redcircle__pocss:hover{
             color: black;
             cursor:pointer;
             background-color: red !important;
             border-color: red !important;
                
        }
        #map_canvas_poc {margin:0 auto;height:400px;min-width:100%;float:right;}
        #map_canvas_poc {margin:0 auto;height:400px;min-width:100%;float:right;}
        #map_wrapper_poc {height: 300px;}
        #map_canvas_poc { width: 50%; height: 100%;}
        .retailerBar_poc {
            border: 1px solid #d8dde6;
           
            border-radius: 7px;
            background: #fff;;
        }
        .textcenter_poc{
             left: 0;
             line-height: 150px;
             margin-top: -101px;
             text-align: center;
             top: 50%;
             width: 100%;
             margin-left: 450px;
        }
        .green-circle_poc {
            background-color:green;
            height:25px;
            width:25px;
            -webkit-border-radius:75px;
            -moz-border-radius:75px;
             border-radius:20px;
        }
        
        .yellow-circle_poc {
            background-color:yellow;
            height:25px;
            width:25px;
            -webkit-border-radius:75px;
            -moz-border-radius:75px;
            border-radius:20px;
        }
        
        .red-circle_poc {
            background-color:red;
            height:25px;
            width:25px;
            -webkit-border-radius:75px;
            -moz-border-radius:75px;
             border-radius:20px;
        }
        .imageWidth{
            width:auto !important;
            height: 100px !important; 
            
        }
        .emptyPanel{
                height:0.5px;
         }
        .broderClass_poc{border-bottom: 1px solid #9C9C9C;box-shadow: inset 0 12px 12px -12px rgba(0, 0, 0, 0.5);}
        .headerpoc {background-color:#000033;color: #ffffff;padding: 10px;}
        .button 
         {
             background-color: lightblue !important;
             border: 2px;
             color: white;
             text-align: center;
             text-decoration: none;
             display: inline-block;
             font-size: 15px;
             margin: 4px 2px;
             cursor: pointer;
             border-radius: 4px;
             background-image: none !important;
          }
          .FilterBg
          {
             background: #EFEFF4;
          }
          .Filterhg {
             overflow-y:auto;
             margin-top : 5px;
          }
          .Accountgrdbg
          {
              background-color: #ffffff !important;
          }
          .textcenterpoc{
             left: 0;
             line-height: 150px;
             margin-top: -101px;
             text-align: center;
             top: 50%;
             width: 100%;
             margin-left: 450px;
          }
    </style>
    </apex:outputPanel>
    </html>
</apex:page>